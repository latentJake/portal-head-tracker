<script type="module" crossorigin src="/portal-head-tracker/assets/index-7ewVudzp.js"></script>
<link rel="stylesheet" crossorigin href="/portal-head-tracker/assets/index-DNdDzOy4.css">
<div class="wrap">
  <h1>Portal Head Tracker - latentJake</h1>
  <meta charset="UTF-8">
  
  <!-- SESSION CONTROLS -->
  <section class="tva-panel">
   
      <legend>Session Controls</legend>
      <div class="row">
        <button id="start" class="tva-btn pill">Start</button>
        <button id="stop" class="tva-btn pill">Stop</button>
        <button id="toggleWebcam" class="tva-btn">Webcam: On</button>
        <button id="toggleMesh" class="tva-btn">FaceMesh: Off</button>
        <button id="toggle3d" class="tva-btn">3D Preview: On</button>
        <button id="btnDocPiP" class="tva-btn">Picture In Picture</button>
        <button id="btnPopout" class="tva-btn">Pop-out</button>
        <span id="wsAddr" class="tva-badge">ws://—</span>
        <span id="wsStatus" class="badge">WS: —</span>
      </div>
    
  </section>

  <!-- DEVICE & QUALITY -->
  <section class="tva-panel">
    
      <legend>Device &amp; Quality</legend>
      <div class="row">
        <label>
          Camera:
          <select id="cameraSel" class="tva-select"></select>
        </label>

        <label>
          Resolution:
          <select id="resSel" class="tva-select">
            <option value="640x480">640×480</option>
            <option value="1280x720" selected>1280×720</option>
            <option value="1920x1080">1920×1080</option>
          </select>
        </label>

        <label>
          Eye:
          <select id="eyeSel" class="tva-select">
            <option value="left">Left</option>
            <option value="center" selected>Center</option>
            <option value="right">Right</option>
          </select>
        </label>

        <label>
          Delegate:
          <select id="delegate" class="tva-select">
            <option value="GPU" selected>GPU</option>
            <option value="CPU">CPU</option>
          </select>
        </label>

        <label>
          <input type="checkbox" id="mirrorFeed" />
          Mirror Feed (X-Axis)
        </label>
      </div>
   
  </section>

  <!-- CALIBRATION -->
  <section class="tva-panel">
    
      <legend>Calibration</legend>
      <div class="row">
        <label>Monitor X (m)
          <input id="monX" type="number" step="0.001" class="tva-input" />
        </label>
        <label>Monitor Y (m)
          <input id="monY" type="number" step="0.001" class="tva-input" />
        </label>

        <label>X Offset (m)
          <input id="offX" type="number" step="0.001" class="tva-input" />
        </label>
        <label>Y Offset (m)
          <input id="offY" type="number" step="0.001" class="tva-input" />
        </label>
        <label>Z Offset (m)
          <input id="offZ" type="number" step="0.001" class="tva-input" />
        </label>

        <label>X Gain/Sens
          <input id="gainX" type="number" step="0.01" class="tva-input" />
        </label>
        <label>Y Gain/Sens
          <input id="gainY" type="number" step="0.01" class="tva-input" />
        </label>

        <button id="saveCal" class="tva-btn">Save</button>
      </div>
  
  </section>

  <!-- PREVIEW ROW -->
  <section class="row">
    <!-- Camera + overlay -->
    <section class="tva-panel" style="flex:1 1 48%;">
      
        <legend>Camera &amp; Overlay</legend>
        <div id="preview">
          <video id="video" playsinline muted style="object-fit:contain;background:#000"></video>
          <canvas id="overlay"></canvas>
        </div>
     
    </section>

    <!-- Three.js mini preview -->
    <section class="tva-panel" style="flex:1 1 48%;">
      
        <legend>3D Preview</legend>
        <div id="threeMount"></div>
      
    </section>
  </section>

  <!-- COORDINATES -->
      <pre id="readout">—</pre>
  <!-- STATUS & PERFORMANCE -->
  <section class="tva-panel">
    
      <legend>Status &amp; Performance</legend>
      <div class="row">
        <span id="status" class="tva-badge">idle</span>
        <span id="actual" class="tva-badge">Actual: —</span>
        <span id="fps" class="tva-badge">cb: — • vid: — • inf: —</span>
        <span id="ms"  class="tva-badge">proc: — ms</span>
      </div>
    
  </section>
</div>

